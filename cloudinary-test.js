// cloudinary-test.js
// рдпрд╣ Next.js рдХреЗ рдмрд┐рдирд╛ рдПрдХ рд╕рд░рд▓ Node.js рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рддрд╛рдХрд┐ Cloudinary рдЕрдкрд▓реЛрдб рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

// рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдЖрдпрд╛рдд рдХрд░реЗрдВ
const { v2: cloudinary } = require('cloudinary');

// 1. рдХреНрд▓рд╛рдЙрдбрд┐рдирд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди
// рд╕реАрдзреЗ рдЖрдкрдХреА рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
cloudinary.config({ 
  cloud_name: 'dithkrv70', 
  api_key: '725814595723855', 
  api_secret: 'IZF8Rfim6-gLZUgpfGMDTt_wYHU',
  secure: true,
});

console.log('тЬЕ рдХреНрд▓рд╛рдЙрдбрд┐рдирд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реЛ рдЧрдпрд╛ред');

// 2. рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░реАрдХреНрд╖рдг рдЫрд╡рд┐ рдХрд╛ URL
// рд╣рдо рд╕реАрдзреЗ рдПрдХ рдЫрд╡рд┐ URL рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╕реНрдерд╛рдиреАрдп рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рдЬрдЯрд┐рд▓рддрд╛рдУрдВ рд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХреЗред
const testImageUrl = 'https://picsum.photos/seed/test/400/300';
console.log(`тП│ '${testImageUrl}' рд╕реЗ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХреА рдЬрд╛ рд░рд╣реА рд╣реИ...`);

// 3. рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди
// рдпрд╣ рдПрдХ async рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬреЛ рдЫрд╡рд┐ рдХреЛ рдХреНрд▓рд╛рдЙрдбрд┐рдирд░реА рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░рддрд╛ рд╣реИред
async function uploadTestImage() {
  try {
    // `cloudinary.uploader.upload` рдореЗрдердб рдЫрд╡рд┐ рдХреЛ рдЕрдкрд▓реЛрдб рдХрд░рддрд╛ рд╣реИред
    const result = await cloudinary.uploader.upload(testImageUrl, {
      folder: 'pithampur-homes-test', // рдХреНрд▓рд╛рдЙрдбрд┐рдирд░реА рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг рдлрд╝реЛрд▓реНрдбрд░
      public_id: `test-image-${Date.now()}`, // рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдлрд╝рд╛рдЗрд▓ рдирд╛рдо
    });

    // 4. рд╕рдлрд▓рддрд╛ рдХрд╛ рд╕рдВрджреЗрд╢
    console.log('\nтЬЕЁЯОЙЁЯОЙЁЯОЙ рд╕рдлрд▓рддрд╛! рдЫрд╡рд┐ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрд▓реЛрдб рд╣реЛ рдЧрдИ! ЁЯОЙЁЯОЙЁЯОЙтЬЕ');
    console.log('----------------------------------------------------');
    console.log('рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдбреА (Public ID):', result.public_id);
    console.log('рд╕реБрд░рдХреНрд╖рд┐рдд рдпреВрдЖрд░рдПрд▓ (Secure URL):', result.secure_url);
    console.log('----------------------------------------------------');

  } catch (error) {
    // 5. рддреНрд░реБрдЯрд┐ рдХрд╛ рд╕рдВрджреЗрд╢
    console.error('\nтЭМЁЯФеЁЯФеЁЯФе рддреНрд░реБрдЯрд┐! рдЫрд╡рд┐ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ред ЁЯФеЁЯФеЁЯФетЭМ');
    console.error('----------------------------------------------------');
    console.error('рддреНрд░реБрдЯрд┐ рдХрд╛ рд╡рд┐рд╡рд░рдг (Error Details):', error.message || error);
    console.error('----------------------------------------------------');
    console.error('рдХреГрдкрдпрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ cloud_name, api_key, рдФрд░ api_secret рд╕рд╣реА рд╣реИрдВред');
  }
}

// 6. рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдПрдБ
uploadTestImage();
